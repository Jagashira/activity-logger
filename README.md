# Activity Logger for macOS

macOS上でユーザーのキーボード入力やアプリケーションの切り替えといったアクティビティを監視し、SQLiteデータベースに記録するための常駐型アプリケーションです。自身の作業パターンを分析し、生産性を向上させるためのデータ収集ツールとして開発しました。

![メニューバーアイコンのスクリーンショット](https://placehold.co/800x400/2d3748/e2e8f0?text=App%20Screenshot%0AMenu%20bar%20icon%20and%20menu)

---

## 主な機能

* **メニューバー常駐型**: Dockにアイコンを表示せず、メニューバーに常駐してバックグラウンドで静かに動作します。
* **アクティビティ記録**:
    * **アプリケーション切り替え**: アクティブになったアプリケーションの名前をタイムスタンプと共に記録します。
    * **キーボード入力**: 入力されたテキストのチャンクを記録します。
* **SQLiteデータベース保存**:
    * すべてのログは `~/.activity-logger/activity.db` にある単一のSQLiteファイルに構造化データとして保存されます。
    * テキストファイルのように散らかることがなく、データの検索や分析が容易です。
* **状態に応じたアイコン変化**:
    * **記録中**: メニューバーのアイコンが青色に変わります。
    * **停止中/一時停止中**: アイコンは灰色で表示されます。
* **ロギングの一時停止・再開**: パスワード入力時など、一時的にログを記録したくない場合に、セッションを終了せずに監視を中断・再開できます。
* **データベースビューア連携**:
    * メニューから直接、推奨ビューアである「DB Browser for SQLite」でデータベースを開けます。
    * ビューアがインストールされていない場合は、ダウンロードページへ案内します。
* **自動ビルドスクリプト**: `build.sh` を実行するだけで、クリーンアップ、アイコン生成、アプリケーションのビルドまでを全自動で行います。

---

## インストール方法

1.  GitHubリポジトリの **[Releases](https://github.com/あなたのユーザー名/あなたのリポジトリ名/releases)** ページにアクセスします。
2.  最新バージョンの `ActivityLogger.dmg` または `ActivityLogger.app.zip` をダウンロードします。
3.  ダウンロードしたファイルを開き、`ActivityLogger.app` を `/Applications` フォルダにドラッグ＆ドロップします。

### 初回起動時の注意

macOSのセキュリティ機能により、初回起動時に「開発元を検証できないため開けません」という警告が表示される場合があります。その際は、以下の手順で許可してください。
1.  「システム設定」>「プライバシーとセキュリティ」を開きます。
2.  下にスクロールし、「"ActivityLogger.app"は開発元を確認できないため、使用がブロックされました。」というメッセージの横にある「このまま開く」ボタンをクリックします。

また、キーボード入力を監視するために、「アクセシビリティ」の許可が必要です。
1.  「システム設定」>「プライバシーとセキュリティ」>「アクセシビリティ」を開きます。
2.  `ActivityLogger.app` をリストに追加し、スイッチをオンにしてください。

---

## 使い方

1.  アプリケーションを起動すると、メニューバーの右上にアイコンが表示されます。
2.  アイコンをクリックするとメニューが表示されます。
    * **ロギング開始/停止**: ログの記録セッションを開始または終了します。
    * **一時停止/再開**: 記録セッションを維持したまま、監視を一時的に中断・再開します。
    * **データベースを開く...**: 記録されたログを `DB Browser for SQLite` で開きます。
    * **ウィンドウを表示/隠す**: ログをリアルタイムで表示するウィンドウの表示・非表示を切り替えます。
    * **終了**: アプリケーションを完全に終了します。

---

## 開発・ビルド方法

このプロジェクトを自分で編集・ビルドする場合の手順です。

### 1. 環境構築

```bash
# リポジトリをクローン
git clone https://github.com/Jagashira/activity-logger.git
cd activity-logger

# Pythonの仮想環境を作成・有効化
python3 -m venv .venv
source .venv/bin/activate

# 必要なライブラリをインストール
pip install -r requirements.txt
